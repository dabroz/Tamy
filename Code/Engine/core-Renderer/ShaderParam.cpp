#include "core-Renderer\ShaderParam.h"
#include "core-Renderer\ShaderDataBuffer.h"
#include "core\Assert.h"


///////////////////////////////////////////////////////////////////////////////

ShaderParamTexture::ShaderParamTexture( const IDString& nameId, Texture* val, const TextureSamplerSettings& samplerSettings )
   : m_name( nameId )
   , m_val( val )
   , m_samplerSettings( samplerSettings )
{}

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

ShaderParamCubeTexture::ShaderParamCubeTexture( const IDString& nameId, CubeTexture* val, const TextureSamplerSettings& samplerSettings )
   : m_name( nameId )
   , m_val( val )
   , m_samplerSettings( samplerSettings )
{}

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

ShaderParamRenderTarget2D::ShaderParamRenderTarget2D( const IDString& nameId, RenderTarget2D* val, const TextureSamplerSettings& samplerSettings, byte renderTextureIdx )
   : m_name( nameId )
   , m_val( val )
   , m_samplerSettings( samplerSettings )
   , m_renderTextureIdx( renderTextureIdx )
{
}

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

ShaderParamDepthBuffer2D::ShaderParamDepthBuffer2D( const IDString& nameId, RenderTarget2D* renderTarget )
   : m_name( nameId )
   , m_val( renderTarget )
{
}

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

ShaderParamRenderTargetCube::ShaderParamRenderTargetCube( const IDString& nameId, RenderTargetCube* val, const TextureSamplerSettings& samplerSettings )
   : m_name( nameId )
   , m_val( val )
   , m_samplerSettings( samplerSettings )
{
}

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

ShaderParamProceduralTexture::ShaderParamProceduralTexture( const IDString& nameId, ProceduralTexture* val, const TextureSamplerSettings& samplerSettings )
   : m_name( nameId )
   , m_val( val )
   , m_samplerSettings( samplerSettings )
{
}

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

ShaderParamDataBuf::ShaderParamDataBuf( const IDString& nameId, ShaderDataBuffer* dataBuf )
   : m_name( nameId )
   , m_dataBuf( dataBuf )
   , m_data( dataBuf->getSize() )
{
   m_data.resize( dataBuf->getSize(), 0 );
   dataBuf->copy( (byte*)m_data );
}

///////////////////////////////////////////////////////////////////////////////
